{% load staticfiles %}
{% load socialaccount %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Meta Tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Sisu VR Inc">
        
        <!-- Title -->
        {% include 'components/portal_tab_title.html' %}

        <!-- Styles -->
        <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
        <link rel="stylesheet" href="{% static 'portal/plugins/bootstrap/css/bootstrap.min.css' %}" />
        <link rel="stylesheet" href="{% static 'portal/plugins/font-awesome/css/font-awesome.min.css' %}" />
        <link rel="stylesheet" href="{% static 'portal/plugins/icomoon/style.css' %}" />
        <link rel="stylesheet" href="{% static 'portal/plugins/uniform/css/default.css' %}" />
        <link rel="stylesheet" href="{% static 'portal/plugins/bootstrap-tagsinput/bootstrap-tagsinput.css' %}" />

        <!-- Theme Styles -->
        <link rel="stylesheet" href="{% static 'portal/css/space.min.css' %}" />
        <link rel="stylesheet" href="{% static 'portal/css/custom.css' %}" />
<style>
    tfoot {
        display: table-header-group !important;
    }
    .employee-role-heading {
        padding-top:26px; 
        padding-bottom: 10px; 
        color: black; 
        font-weight: bold;
    }
    .add-employee-button-title {
        font-size: 20px;
        padding: 0 20px 0 5px;
        margin: 0 0 2px 0;
    }
    .add-employee-button {
        display: inline-flex;
        flex-direction: row;
        /* justify-content: center; */
        border: 2px solid;
        border-radius: 25px;
        color: #9F3688;
        width: max-content;
        height: 40px;
        padding: 5px;
        align-items: center;
        cursor: pointer;
    }
    .add-employee-button-button {
        border: 2px solid #9F3688; 
        border-radius: 25px; 
        height: 25px; 
        background-color: white;
    }
    .employee-name-input {
        display: flex;
        flex-direction: row;
        justify-content: center;
        border: 2px solid #F3BDE4;
        border-radius: 25px;
        color: black;
        background-color: #F3BDE4;
        width: max-content;
        height: 40px;
        font-size: 20px;
        padding: 10px;
        margin-top: 20px;
        font-weight: lighter;
        align-items: center;
        cursor: pointer;
    }
    .btn-sisu-primary {
        font-weight: bold; 
        font-size: 20px;
        margin-top: 30px;
    }
</style>
    </head>
    <body>
        
        <!-- Page Container -->
        <div class="page-container">

            <!-- Page Sidebar Start -->
            {% if player.admin %}
                {% include 'components/portal_sidebar_admin.html' %}
            {% elif player.supervisor %}
                {% include 'components/portal_sidebar_supervisor.html' %}
            {% else %}
                {% include 'components/portal_sidebar_employee.html' %}
            {% endif %}
            <!-- Page Sidebar End -->

            <!-- Page Content Start -->
            <div class="page-content">
                <!-- Page Sidebar / Navigation Elements Start -->
                <div class="page-header">
                    <!-- Collapsed / Mobile Navigation Bar Start -->
                    {% include 'components/portal_mobilenav.html' %}
                    <!-- Collapsed / Mobile Navigation Bar End -->
                </div>
                <!-- Page Sidebar / Navigation Elements End -->

                <!-- Page Inner Start -->
                <div class="page-inner">
                    <!-- Page Top Bar Start -->
                    <div class="page-title">
                        <h2>Register Employees</h2>
                        <hr>
                    </div>
                    <!-- Page Top Bar End -->
                    
                    <!-- Main Content Start -->
                    <div id="main-wrapper">
                        <div class="row">
                            <p>Enter each employee's email address into their corresponding textbox below (VR or Desktop, Non-supervisor, or Supervisor).</p>
                            <p>When you are finished entering each employee's email into the appropriate field, click "<a style="color: #9F3688" href="#send-reg-emails">Register Employees and Send Emails</a>" at the bottom of this page.</p>
                            <hr>
                                <!-- NOTE - the input of "type=email" and data-role="tagsinput" was causing issues - need to investigate further -->
                                <div id="vr-nonsupervisor-container">
                                    <h3 class="sisu-h3 employee-role-heading">1. VR, Non-Supervisor</h3>
                                    <p>Add each employee’s email address that you would like to register non-supervisor modules using the VR headset.</p>
                                    <!-- <input type="email" data-role="tagsinput" class="form-control" name="vr-nonsupervisor"> -->
                                    <div id="vr-nonsupervisor" class="form-control add-employee-button click-nonsupervisor" name="vr-nonsupervisor">
                                        <p class="add-employee-button-title click-nonsupervisor">Add an employee</p>
                                        <button id="vr-nonsupervisor" name="vr-nonsupervisor" class="add-employee-button-button click-nonsupervisor">+</button>
                                    </div>
                                </div>
                                <div id="vr-supervisor-container">
                                    <h3 class="sisu-h3 employee-role-heading">2. VR, Supervisor</h3>
                                    <p>Add each employee’s email address that you would like to register for supervisor modules using the VR headset.</p>
                                    <!-- <input type="email" data-role="tagsinput" class="form-control" name="vr-supervisor"> -->
                                    <div id="vr-supervisor" class="form-control add-employee-button" name="vr-supervisor">
                                        <p class="add-employee-button-title click-supervisor">Add an employee</p>
                                        <button id="vr-supervisor" name="vr-supervisor" class="add-employee-button-button">+</button>
                                    </div>
                                </div>
                                <div id="desktop-nonsupervisor-container">
                                    <h3 class="sisu-h3 employee-role-heading">3. Desktop, Non-Supervisor</h3>
                                    <p>Add each employee’s email address that you would like to register for non-supervisor modules using a desktop.</p>
                                    <!-- <input type="email" data-role="tagsinput" class="form-control" name="desktop-nonsupervisor"> -->
                                    <div id="desktop-nonsupervisor" class="form-control add-employee-button" name="desktop-nonsupervisor" >
                                        <p class="add-employee-button-title click-desktop-nonsupervisor">Add an employee</p>
                                        <button id="desktop-nonsupervisor" name="desktop-nonsupervisor" class="add-employee-button-button">+</button>
                                    </div>
                                </div>
                                <div id="desktop-supervisor-container">
                                    <h3 class="sisu-h3 employee-role-heading">4. Desktop, Supervisor</h3>
                                    <p>Add each employee’s email address that you would like to register for supervisor modules using a desktop.</p>
                                    <!-- <input type="email" data-role="tagsinput" class="form-control" name="desktop-supervisor"> -->
                                    <div id="desktop-supervisor" class="form-control add-employee-button" name="desktop-supervisor" >
                                        <p class="add-employee-button-title click-desktop-supervisor">Add an employee</p>
                                        <button id="desktop-supervisor" name="desktop-supervisor" class="add-employee-button-button"">+</button>
                                    </div>
                                </div>
                                <div style="padding-bottom: 120px" class="">
                                    <br>
                                    <button name="send-reg-emails" class="btn btn-sisu-primary bnt-submit">
                                        Register employees and send registration emails
                                    </button>

                                    <div style="width: 350px; margin-top:12px">
                                    
                                    <div id="alert-emails-sent" class="alert alert-success alert-dismissible hidden" role="alert">
                                        Emails successfully sent.
                                        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                                    </div>
                                </div>
                        </div>
                    </div>
                    <!-- Main Content End -->

                    <!-- Page Footer Start -->
                    {% include 'components/portal_footer.html' %}
                    <!-- Page Footer End -->
                </div>
                <!-- Page Inner End -->
            </div>
            <!-- Page Content End -->

        </div>
        <!-- /Page Content -->
        
        
        <!-- Scripts -->
        <script src="{% static 'portal/plugins/jquery/jquery-3.1.0.min.js' %}"></script>
        <script src="{% static 'portal/plugins/bootstrap/js/bootstrap.min.js' %}"></script>
        <script src="{% static 'portal/plugins/jquery-slimscroll/jquery.slimscroll.min.js' %}"></script>
        <script src="{% static 'portal/plugins/uniform/js/jquery.uniform.standalone.js' %}"></script>
        <script src="{% static 'portal/plugins/bootstrap-tagsinput/bootstrap-tagsinput.min.js' %}"></script>
        <script src="{% static 'portal/js/space.min.js' %}"></script>
        <script src="{% static 'portal/js/scripts.js' %}"></script>
        <script>
            //     let vr_nonsupervisor = $('#vr-nonsupervisor').val()
            //     let vr_supervisor = $('#vr-supervisor').val()
            //     let desktop_nonsupervisor = $('#desktop-nonsupervisor').val()
            //     let desktop_supervisor = $('#desktop-supervisor').val();

            //     {% comment %} $('#vr-nonsupervisor').val("vr-nonsupervisor@sisuvr.com"); {% endcomment %}
            //     {% comment %} $('#vr-supervisor').val("vr-supervisor@gmail.com"); {% endcomment %}
            //     {% comment %} $('#desktop-nonsupervisor').val("desktop-nonsupervisor@gmail.com"); {% endcomment %}
            //     {% comment %} $('#desktop-supervisor').val("desktop-supervisor@gmail.com"); {% endcomment %}
        

            // $(".bnt-submit").click(function() {

            //     console.log('FORM CLCIKED!')
            //     let vr_nonsupervisor = $('#vr-nonsupervisor').val()
            //     let vr_supervisor = $('#vr-supervisor').val()
            //     let desktop_nonsupervisor = $('#desktop-nonsupervisor').val()
            //     let desktop_supervisor = $('#desktop-supervisor').val();

            //     console.log('vr_nonsupervisor = ', vr_nonsupervisor)

            //     $.ajax({
            //         url: '',
            //         type: 'GET',
            //         data: {
            //             vr_nonsupervisor: vr_nonsupervisor,
            //             vr_supervisor: vr_supervisor,
            //             desktop_nonsupervisor: desktop_nonsupervisor,
            //             desktop_supervisor: desktop_supervisor
            //         },
            //         success: function(response){
            //             console.log('RESPONSE', response);
            //             $('#vr-nonsupervisor').val("");
            //             $('#vr-supervisor').val("");
            //             $('#desktop-nonsupervisor').val("");
            //             $('#desktop-supervisor').val("");

            //             if (response['failure_list'].length) {
            //                 $('#alert-emails-sent').text('Invalid email addresses: ' + response['failure_list'].join(', '));
            //             } else {
            //                 $('#alert-emails-sent').text('Emails successfully sent.');
            //             }
            //             $('#alert-emails-sent').removeClass('hidden');
            //         }
            //     })


            // });

            // Rosa's scripts:
            document.body.addEventListener('click', (e) => {
                
                if (e.target.matches('.click-nonsupervisor')) {
                    const el = document.getElementById('vr-nonsupervisor-container')
                    const newInput = document.createElement('input')
                    newInput.classList.add('employee-name-input')
                    el.appendChild(newInput)
                }

                if (e.target.matches('.click-supervisor')) {
                    const el = document.getElementById('vr-supervisor-container')
                    const newInput = document.createElement('input')
                    newInput.classList.add('employee-name-input')
                    el.appendChild(newInput)
                }
                
                if (e.target.matches('.click-desktop-nonsupervisor')) {
                    const el = document.getElementById('desktop-nonsupervisor-container')
                    const newInput = document.createElement('input')
                    newInput.classList.add('employee-name-input')
                    el.appendChild(newInput)
                }

                if (e.target.matches('.click-desktop-supervisor')) {
                    const el = document.getElementById('desktop-supervisor-container')
                    const newInput = document.createElement('input')
                    newInput.classList.add('employee-name-input')
                    el.appendChild(newInput)
                }
            })
        </script>
    </body>
</html>